# ç®€æ˜“æœ‰é™å…ƒåˆ†æç»“æœæŸ¥çœ‹å™¨

åŸºäºC++ã€Qt6ã€VTKå¼€å‘çš„æœ‰é™å…ƒåˆ†æç»“æœå¯è§†åŒ–å·¥å…·ã€‚

## åŠŸèƒ½ç‰¹æ€§

### åŸºç¡€åŠŸèƒ½
- **æ–‡ä»¶åŠ è½½**: æ”¯æŒVTKæ ¼å¼æ–‡ä»¶(.vtu, .vtk)
- **ä¸‰ç»´äº¤äº’**: é¼ æ ‡æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾æ¨¡å‹
- **äº‘å›¾æ˜¾ç¤º**: æ ¹æ®æ ‡é‡æ•°æ®ç”Ÿæˆå½©è‰²äº‘å›¾
- **æ•°æ®åˆ‡æ¢**: æ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„åˆ‡æ¢æ˜¾ç¤º

### æ–°å¢é«˜çº§åŠŸèƒ½ âœ¨
- **ç½‘æ ¼æ˜¾ç¤ºåˆ‡æ¢**: å®ä½“æ˜¾ç¤ºã€ç½‘æ ¼æ˜¾ç¤ºã€å®ä½“+ç½‘æ ¼ç»„åˆæ˜¾ç¤º
- **é¢œè‰²æ˜ å°„è¡¨**: 6ç§é¢œè‰²æ–¹æ¡ˆï¼ˆå½©è™¹ã€çƒ­åŠ›å›¾ã€è“ç™½çº¢ã€ç°åº¦ã€ç»¿è“ã€ç´«çº¢ï¼‰
- **é€æ˜åº¦æ§åˆ¶**: æ»‘å—è°ƒèŠ‚æ¨¡å‹é€æ˜åº¦ï¼ˆ10%-100%ï¼‰
- **æ–¹å‘åæ ‡è½´**: å·¦ä¸‹è§’æ˜¾ç¤ºXYZåæ ‡è½´ï¼Œä¾¿äºå®šå‘
- **æ¨ªå‘æ ‡é‡æ¡**: å³ä¸‹è§’æ¨ªå‘æ˜¾ç¤ºï¼Œå­—ä½“æ›´å¤§æ›´æ¸…æ™°

### ä¸“ä¸šçº§é«˜çº§åŠŸèƒ½ ğŸ”¥
- **å‰–åˆ‡/åˆ‡ç‰‡**: ä½¿ç”¨è™šæ‹Ÿå¹³é¢åˆ‡å‰²æ¨¡å‹ï¼Œè§‚å¯Ÿå†…éƒ¨ç»“æ„
- **æ•°æ®æ‹¾å–**: é¼ æ ‡ç‚¹å‡»è·å–ç²¾ç¡®åæ ‡å’Œæ•°å€¼ä¿¡æ¯
- **ç­‰å€¼é¢/ç­‰å€¼çº¿**: æå–ç‰¹å®šæ•°å€¼çš„ç­‰å€¼é¢ï¼Œæ”¯æŒæ‰‹åŠ¨å’Œè‡ªåŠ¨ç”Ÿæˆ

## ç¯å¢ƒè¦æ±‚

- Windows 10/11
- Visual Studio 2022
- Qt 6.9.1 (è·¯å¾„: H:\Programs\Qt\6.9.1\msvc2022_64)
- VTK 9.5.0 (è·¯å¾„: H:\SourceCode\vtk-9.5.0\install)
- Eigen 3.4.0 (è·¯å¾„: H:\SourceCode\eigen-3.4.0\install)

## æ„å»ºå’Œéƒ¨ç½²æ–¹æ³•

### ğŸš€ æ–¹æ³•ä¸€ï¼šä¸€é”®æ„å»ºï¼ˆæ¨èï¼‰
```bash
python ultimate_build.py
```
è‡ªåŠ¨æ„å»ºé¡¹ç›®å¹¶å¤åˆ¶æ‰€æœ‰VTKå’ŒQt DLLæ–‡ä»¶ï¼Œå½»åº•è§£å†³ä¾èµ–é—®é¢˜

### æ–¹æ³•äºŒï¼šä½¿ç”¨ä¸»æ§åˆ¶è„šæœ¬
```bash
python main.py
```
ç„¶åé€‰æ‹©"ğŸš€ æ„å»ºå’Œéƒ¨ç½²é¡¹ç›®"

### æ–¹æ³•ä¸‰ï¼šå¿«é€Ÿå¯åŠ¨ï¼ˆå¦‚æœå·²æ„å»ºï¼‰
```bash
python run.py
```

### æ–¹æ³•å››ï¼šåˆ†æ­¥éª¤æ„å»º
1. æ£€æŸ¥ä¾èµ–ï¼š`python check_dependencies.py`
2. æ„å»ºé¡¹ç›®ï¼š`python build.py`
3. éƒ¨ç½²ä¾èµ–ï¼š`python deploy.py`

### æ–¹æ³•äº”ï¼šæ‰‹åŠ¨æ„å»º
1. ç¡®ä¿æ‰€æœ‰ä¾èµ–åº“å·²æ­£ç¡®å®‰è£…åœ¨æŒ‡å®šè·¯å¾„
2. åˆ›å»ºæ„å»ºç›®å½•ï¼š`mkdir build && cd build`
3. é…ç½®CMakeï¼š`cmake .. -G "Visual Studio 17 2022" -A x64`
4. æ„å»ºé¡¹ç›®ï¼š`cmake --build . --config Release`
5. CMakeä¼šè‡ªåŠ¨å¤åˆ¶ä¾èµ–åº“åˆ°å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬æ“ä½œ
1. å¯åŠ¨ç¨‹åº
2. ç‚¹å‡»"æ‰“å¼€æ–‡ä»¶"æŒ‰é’®é€‰æ‹©VTKæ–‡ä»¶(.vtuæˆ–.vtkæ ¼å¼)
3. æ–‡ä»¶åŠ è½½åï¼Œä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©è¦æ˜¾ç¤ºçš„æ•°æ®ç±»å‹

### é«˜çº§åŠŸèƒ½ä½¿ç”¨
4. **æ˜¾ç¤ºæ¨¡å¼æ§åˆ¶**:
   - å‹¾é€‰"æ˜¾ç¤ºç½‘æ ¼"å¯åŒæ—¶æ˜¾ç¤ºå®ä½“å’Œç½‘æ ¼
   - ç½‘æ ¼ä»¥é»‘è‰²çº¿æ¡†æ˜¾ç¤ºï¼Œä¾¿äºè§‚å¯Ÿç½‘æ ¼è´¨é‡

5. **é¢œè‰²æ˜ å°„åˆ‡æ¢**:
   - ä»"é¢œè‰²æ˜ å°„"ä¸‹æ‹‰èœå•é€‰æ‹©ä¸åŒçš„é¢œè‰²æ–¹æ¡ˆ
   - å½©è™¹è‰²é€‚åˆä¸€èˆ¬åˆ†æï¼Œçƒ­åŠ›å›¾é€‚åˆæ¸©åº¦åœºï¼Œç°åº¦é€‚åˆæ‰“å°

6. **é€æ˜åº¦è°ƒèŠ‚**:
   - ä½¿ç”¨é€æ˜åº¦æ»‘å—è°ƒèŠ‚æ¨¡å‹é€æ˜åº¦
   - é€‚åˆè§‚å¯Ÿå†…éƒ¨ç»“æ„æˆ–é‡å æ¨¡å‹

7. **é¼ æ ‡äº¤äº’æ“ä½œ**:
   - å·¦é”®æ‹–æ‹½: æ—‹è½¬æ¨¡å‹
   - ä¸­é”®æ‹–æ‹½: å¹³ç§»æ¨¡å‹
   - æ»šè½®: ç¼©æ”¾æ¨¡å‹
   - å·¦ä¸‹è§’åæ ‡è½´å¸®åŠ©å®šå‘

### ä¸“ä¸šçº§åŠŸèƒ½ä½¿ç”¨
8. **å‰–åˆ‡åŠŸèƒ½**:
   - å³ä¾§"å‰–åˆ‡æ§åˆ¶"é¢æ¿
   - å‹¾é€‰"å¯ç”¨å‰–åˆ‡"å¼€å§‹ä½¿ç”¨
   - æ»‘å—æ§åˆ¶å‰–åˆ‡å¹³é¢ä½ç½®å’Œæ–¹å‘
   - å®æ—¶è§‚å¯Ÿæ¨¡å‹å†…éƒ¨ç»“æ„

9. **ç­‰å€¼é¢åŠŸèƒ½**:
   - å³ä¾§"ç­‰å€¼é¢æ§åˆ¶"é¢æ¿
   - æ‰‹åŠ¨è¾“å…¥ç‰¹å®šæ•°å€¼æˆ–è‡ªåŠ¨ç”Ÿæˆ
   - æ”¯æŒå¤šä¸ªç­‰å€¼é¢åŒæ—¶æ˜¾ç¤º
   - é»„è‰²çº¿æ¡æ˜¾ç¤ºç­‰å€¼é¢

10. **æ•°æ®æ‹¾å–åŠŸèƒ½**:
    - èœå•"å·¥å…·" -> "å¯ç”¨æ•°æ®æ‹¾å–"
    - é¼ æ ‡ç‚¹å‡»æ¨¡å‹è·å–ç²¾ç¡®æ•°å€¼
    - çŠ¶æ€æ æ˜¾ç¤ºåæ ‡å’Œæ•°æ®ä¿¡æ¯

## é¡¹ç›®ç»“æ„

```
FEMResultViewer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.cpp                      # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ MainWindow.h                  # ä¸»çª—å£å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ MainWindow.cpp                # ä¸»çª—å£å®ç°
â”‚   â”œâ”€â”€ visualization/               # å¯è§†åŒ–åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ClippingWidget.h         # å‰–åˆ‡æ§åˆ¶ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ClippingWidget.cpp
â”‚   â”‚   â”œâ”€â”€ ContourWidget.h          # ç­‰å€¼é¢æ§åˆ¶ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ContourWidget.cpp
â”‚   â””â”€â”€ interaction/                 # äº¤äº’åŠŸèƒ½æ¨¡å—
â”‚       â”œâ”€â”€ DataPicker.h             # æ•°æ®æ‹¾å–ç»„ä»¶
â”‚       â””â”€â”€ DataPicker.cpp
â”œâ”€â”€ CMakeLists.txt                   # CMakeé…ç½®æ–‡ä»¶
â”œâ”€â”€ copy_vtk_dlls.cmake              # VTK DLLè‡ªåŠ¨å¤åˆ¶è„šæœ¬
â”œâ”€â”€ main.py                          # ä¸»æ§åˆ¶è„šæœ¬
â”œâ”€â”€ ultimate_build.py                # ç»ˆææ„å»ºè„šæœ¬
â”œâ”€â”€ test_advanced_features.py        # é«˜çº§åŠŸèƒ½æµ‹è¯•è„šæœ¬
â”œâ”€â”€ check_dependencies.py            # ä¾èµ–æ£€æŸ¥è„šæœ¬
â”œâ”€â”€ create_test_data.py              # æµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬
â””â”€â”€ README.md                        # è¯´æ˜æ–‡æ¡£
```

## Pythonè„šæœ¬è¯´æ˜

- **main.py**: ä¸»æ§åˆ¶é¢æ¿ï¼Œæä¾›èœå•å¼æ“ä½œç•Œé¢
- **ultimate_build.py**: ç»ˆææ„å»ºè„šæœ¬ï¼Œè‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²æ‰€æœ‰ä¾èµ–
- **check_dependencies.py**: æ£€æŸ¥å¼€å‘ç¯å¢ƒå’Œä¾èµ–åº“
- **test_cmake.py**: æµ‹è¯•CMakeé…ç½®æ˜¯å¦æ­£ç¡®
- **create_test_data.py**: ç”Ÿæˆæµ‹è¯•ç”¨çš„VTKæ–‡ä»¶
- **run.py**: å¿«é€Ÿå¯åŠ¨å·²æ„å»ºçš„ç¨‹åº

## æŠ€æœ¯ç‰¹ç‚¹

- ä½¿ç”¨Qt6æ„å»ºç°ä»£åŒ–ç”¨æˆ·ç•Œé¢
- é›†æˆVTKå®ç°é«˜æ€§èƒ½ä¸‰ç»´å¯è§†åŒ–
- æ”¯æŒç‚¹æ•°æ®å’Œå•å…ƒæ•°æ®çš„äº‘å›¾æ˜¾ç¤º
- è‡ªåŠ¨ç”Ÿæˆé¢œè‰²æ˜ å°„å’Œå›¾ä¾‹
- æµç•…çš„ä¸‰ç»´äº¤äº’ä½“éªŒ
- **CMakeè‡ªåŠ¨ä¾èµ–ç®¡ç†** - æ„å»ºæ—¶è‡ªåŠ¨å¤åˆ¶æ‰€éœ€DLLæ–‡ä»¶

## CMakeè‡ªåŠ¨ä¾èµ–å¤„ç†

æ–°ç‰ˆæœ¬çš„CMakeLists.txtåŒ…å«ä»¥ä¸‹è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼š

1. **è‡ªåŠ¨æ£€æµ‹å’Œå¤åˆ¶Qt DLLæ–‡ä»¶**
2. **è‡ªåŠ¨æ£€æµ‹å’Œå¤åˆ¶VTK DLLæ–‡ä»¶**
3. **è‡ªåŠ¨å¤åˆ¶Qtå¹³å°æ’ä»¶**
4. **ä½¿ç”¨windeployqtè‡ªåŠ¨éƒ¨ç½²Qtä¾èµ–**
5. **æ„å»ºå®Œæˆåç«‹å³å¯è¿è¡Œï¼Œæ— éœ€æ‰‹åŠ¨éƒ¨ç½²**

æ”¯æŒçš„DLLæ–‡ä»¶åŒ…æ‹¬ï¼š
- Qtæ ¸å¿ƒåº“ï¼šQt6Core, Qt6Gui, Qt6Widgets, Qt6OpenGL, Qt6OpenGLWidgets
- VTKæ ¸å¿ƒåº“ï¼šæ‰€æœ‰å¿…éœ€çš„VTK 9.5æ¨¡å—
- VTKç¬¬ä¸‰æ–¹åº“ï¼šexpat, lz4, lzma, zlib, glew, freetype
- Qtå¹³å°æ’ä»¶ï¼šqwindows.dll
## æ•…éšœæ’
é™¤

### å¸¸è§é—®é¢˜

**é—®é¢˜1ï¼šæ‰¾ä¸åˆ°DLLæ–‡ä»¶**
- é”™è¯¯ä¿¡æ¯ï¼š`ç”±äºæ‰¾ä¸åˆ° vtkRenderingOpenGL2-9.5.dllï¼Œæ— æ³•ç»§ç»­æ‰§è¡Œä»£ç `
- è§£å†³æ–¹æ¡ˆï¼šè¿è¡Œ `deploy_simple.bat` æˆ– `build_and_deploy.bat`

**é—®é¢˜2ï¼šæ‰¾ä¸åˆ°Qt DLLæ–‡ä»¶**
- é”™è¯¯ä¿¡æ¯ï¼š`ç”±äºæ‰¾ä¸åˆ° Qt6OpenGLWidgets.dllï¼Œæ— æ³•ç»§ç»­æ‰§è¡Œä»£ç `
- è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿Qtè·¯å¾„æ­£ç¡®ï¼Œè¿è¡Œéƒ¨ç½²è„šæœ¬

**é—®é¢˜3ï¼šCMakeé…ç½®å¤±è´¥**
- è§£å†³æ–¹æ¡ˆï¼š
  1. æ£€æŸ¥ä¾èµ–è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š`check_dependencies.bat`
  2. ç¡®ä¿Visual Studio 2022å·²å®‰è£…
  3. ç¡®ä¿CMakeç‰ˆæœ¬ >= 3.16

**é—®é¢˜4ï¼šVTKç¼–è¯‘é”™è¯¯**
- è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿VTKæ˜¯ç”¨ç›¸åŒçš„ç¼–è¯‘å™¨å’Œé…ç½®ç¼–è¯‘çš„
- å»ºè®®ä½¿ç”¨Releaseé…ç½®ç¼–è¯‘VTK

### æ‰‹åŠ¨éƒ¨ç½²DLLæ–‡ä»¶

å¦‚æœè‡ªåŠ¨éƒ¨ç½²è„šæœ¬å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹æ–‡ä»¶åˆ° `build\Release\` ç›®å½•ï¼š

**Qt DLLæ–‡ä»¶**ï¼ˆä» `H:\Programs\Qt\6.9.1\msvc2022_64\bin\`ï¼‰ï¼š
- Qt6Core.dll
- Qt6Gui.dll  
- Qt6Widgets.dll
- Qt6OpenGL.dll
- Qt6OpenGLWidgets.dll

**VTK DLLæ–‡ä»¶**ï¼ˆä» `H:\SourceCode\vtk-9.5.0\install\bin\`ï¼‰ï¼š
- vtkCommonCore-9.5.dll
- vtkCommonDataModel-9.5.dll
- vtkRenderingCore-9.5.dll
- vtkRenderingOpenGL2-9.5.dll
- vtkGUISupportQt-9.5.dll
- ä»¥åŠå…¶ä»–ç›¸å…³çš„VTKåº“æ–‡ä»¶

**Qtå¹³å°æ’ä»¶**ï¼š
- åˆ›å»º `platforms` æ–‡ä»¶å¤¹
- å¤åˆ¶ `qwindows.dll` åˆ° `platforms\` æ–‡ä»¶å¤¹